## 데이터라이즈 프론트엔드 전형 사전 과제

<svg width="207" height="30" viewBox="0 0 207 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M35.4283 3.53955H12.4045C6.04586 3.53955 0.892578 8.69283 0.892578 15.0515C0.892578 21.4101 6.04586 26.5634 12.4045 26.5634H35.4283C41.7869 26.5634 46.9402 21.4101 46.9402 15.0515C46.9402 8.69283 41.7869 3.53955 35.4283 3.53955ZM35.4283 22.1481H12.4045C8.48275 22.1481 5.3078 18.9688 5.3078 15.0515C5.3078 11.1341 8.48712 7.95478 12.4045 7.95478H35.4283C39.35 7.95478 42.525 11.1341 42.525 15.0515C42.525 18.9688 39.3457 22.1481 35.4283 22.1481Z"
      fill="#191919"/>
    <path
      d="M39.656 15.4312V14.846C37.4856 14.846 35.7212 13.086 35.7212 10.9111H35.136C35.136 13.0816 33.376 14.846 31.2012 14.846V15.4312C33.3717 15.4312 35.136 17.1911 35.136 19.366H35.7212C35.7212 17.1955 37.4812 15.4312 39.656 15.4312Z"
      fill="#191919"/>
    <path
      d="M79.2535 15.0427C79.2535 22.2136 74.0827 26.5589 66.0034 26.5589H54.6182V3.53076H66.0034C74.0827 3.53076 79.2535 7.87175 79.2535 15.047V15.0427ZM74.2661 15.0427C74.2661 10.3043 70.7768 8.00276 65.6366 8.00276H59.5182V22.0869H65.6366C70.7768 22.0869 74.2661 19.7854 74.2661 15.047V15.0427Z"
      fill="#191919"/>
    <path
      d="M100.949 15.7674V22.4448C100.949 23.7593 101.163 24.8467 101.714 25.8992H96.8486C96.4818 25.2398 96.2372 24.4188 96.2372 23.7593V23.7244C94.9532 25.2398 92.4727 26.5543 89.2279 26.5543C85.6162 26.5543 80.9346 25.0083 80.9346 20.3049C80.9346 15.6014 85.6162 14.086 89.2279 14.086C92.4727 14.086 94.9489 15.3699 96.2372 16.9159V15.7324C96.2372 12.3784 94.1846 10.9285 90.1493 10.9285C87.8566 10.9285 86.018 11.2561 84.0003 12.4439L82.5941 9.08557C84.7952 7.86712 88.1011 7.07666 91.1014 7.07666C97.2504 7.07666 100.954 10.1381 100.954 15.763L100.949 15.7674ZM96.3289 20.0778C95.0755 17.9379 92.5644 17.4138 90.3939 17.4138C88.433 17.4138 85.5594 17.9073 85.5594 20.3092C85.5594 22.7112 88.433 23.2352 90.3939 23.2352C92.5688 23.2352 95.0755 22.6762 96.3289 20.5363V20.0778Z"
      fill="#191919"/>
    <path
      d="M117.698 24.8164C116.257 25.8689 114.147 26.5589 112.16 26.5589C108.61 26.5589 105.854 24.4845 105.854 20.4055V11.5576H102.731V7.7407H105.854V3.52637H110.597V7.7407H117.545V11.5576H110.597V19.519C110.597 21.362 111.881 22.314 113.566 22.314C114.728 22.314 115.767 21.8554 116.72 21.362L117.698 24.8164Z"
      fill="#191919"/>
    <path
      d="M138.821 15.7674V22.4448C138.821 23.7593 139.035 24.8467 139.586 25.8992H134.721C134.354 25.2398 134.109 24.4188 134.109 23.7593V23.7244C132.825 25.2398 130.345 26.5543 127.1 26.5543C123.488 26.5543 118.807 25.0083 118.807 20.3049C118.807 15.6014 123.488 14.086 127.1 14.086C130.345 14.086 132.825 15.3699 134.109 16.9159V15.7324C134.109 12.3784 132.057 10.9285 128.021 10.9285C125.724 10.9285 123.89 11.2561 121.868 12.4439L120.462 9.08557C122.663 7.86712 125.969 7.07666 128.969 7.07666C135.118 7.07666 138.821 10.1381 138.821 15.763V15.7674ZM134.201 20.0778C132.948 17.9379 130.436 17.4138 128.262 17.4138C126.305 17.4138 123.427 17.9073 123.427 20.3092C123.427 22.7112 126.305 23.2352 128.262 23.2352C130.436 23.2352 132.943 22.6762 134.201 20.5363V20.0778Z"
      fill="#191919"/>
    <path
      d="M142.652 26.5588V8.43064H147.395V12.1821C148.771 9.45257 151.679 8.0376 154.924 8.0376V12.4135C151.251 12.4135 148.404 13.9595 147.395 17.1519V26.5632H142.652V26.5588Z"
      fill="#191919"/>
    <path
      d="M156.841 3.69223C156.841 2.14624 158.033 1.09375 159.714 1.09375C161.396 1.09375 162.531 2.14624 162.531 3.69223C162.531 5.23821 161.37 6.26013 159.714 6.26013C158.059 6.26013 156.841 5.1727 156.841 3.69223ZM162.134 26.5588H157.391V8.43062H162.134V26.5588Z"
      fill="#191919"/>
    <path
      d="M183.28 11.5881L171.528 22.707H183.647V26.5894H164.951V23.397L176.703 12.2781H165.379V8.42627H183.28V11.5837V11.5881Z"
      fill="#191919"/>
    <path
      d="M196.464 22.7113C199.373 22.7113 201.207 21.8903 202.954 20.3748L205.495 23.3707C203.137 25.6067 200.111 26.5937 196.224 26.5937C189.276 26.5937 185.267 22.8423 185.267 16.82C185.267 10.7976 189.245 7.01562 195.888 7.01562C202.006 7.01562 206.107 10.3696 206.107 16.7894C206.107 17.3833 206.076 17.6759 205.985 17.9729H189.826C190.254 21.2308 192.551 22.7113 196.464 22.7113ZM190.036 14.715L201.574 14.6495C200.84 12.051 198.91 10.8981 195.914 10.8981C192.918 10.8981 190.712 12.1471 190.036 14.715Z"
      fill="#191919"/>
</svg>

#### 안녕하세요. 프론트엔드 지원자 전다훈 입니다.

### 프로젝트 정보

👉 Github Repository URL : https://github.com/DaHoon06/datarize-fe-assignments

### ⚙️ Stacks

Node Version `20.13.1` 

yarn version `1.22.17`

### Development

<div align='left'>
<img src="https://img.shields.io/badge/TypeScript-3178C6?style=flat&logo=TypeScript&logoColor=white"/>
<img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/>
<img src="https://img.shields.io/badge/Jest-C21325?style=flat&logo=jest&logoColor=white"/>
<img src="https://img.shields.io/badge/Axios-5A29E4?style=flat&logo=axios&logoColor=white"/>
<img src="https://img.shields.io/badge/-Tanstack%20Query-FF4154?style=flat&logo=react%20query&logoColor=white">
</div>

### Environment

<div align='left'>
<img src="https://img.shields.io/badge/git-F05032?style=flat&logo=git&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=github&logoColor=white"/>
</div>

### 📃 시작 가이드

#### Installation

```bash
cd apps
yarn install
```

#### Server Run

```bash
cd apps
# 백엔드 실행
yarn start-server
# 클라이언트 실행
yarn start-client
## 유닛테스트
yarn jest-start-client
```

### 🤔 요구사항 및 구현

#### 요구사항 1. 가격대별 구매 빈도 차트

  - 한 달 동안 발생한 구매 데이터를 바탕으로, 각 가격대의 제품이 얼마나 많이 구매되었는지 보여주는 차트를 구현하세요. 
  - 가격대는 2만원 이하부터 10만원 이상까지 만원 단위로 구분됩니다. 차트는 바 차트 형태로 시각화되어야 합니다. 날짜를 선택해서 특정 기간을 조회할 수 있도록 구현해주세요.

API Endpoint : `/purchase-frequency`
Method: `GET`

#### 구현 1. 바 차트

<img width="963" alt="스크린샷 2024-11-09 오후 9 51 53" src="https://github.com/user-attachments/assets/d489b0c8-51d3-4339-935b-f9e48d109655">

활용 라이브러리 : `@nivo/bar`

##### 구현 2. 날짜 검색

<img width="835" alt="스크린샷 2024-11-09 오후 9 53 26" src="https://github.com/user-attachments/assets/bdb66493-66cb-410f-9d01-1ec5fadc351d">

<img width="860" alt="스크린샷 2024-11-09 오후 9 53 53" src="https://github.com/user-attachments/assets/5e45e9ae-899f-4e8c-9071-375fad56a138">

시작 / 종료 날짜 선택하여 구매 데이터 조회

활용 라이브러리 : `react-datepicker`

#### 요구사항 2. 가장 많이 구매한 고객 목록 및 검색 기능
- 한 달 동안 가장 많이 구매한 고객을 내림차순/오름차순으로 정렬하여 보여주는 목록을 구현하세요. 
- 기본 정렬은 ID입니다. 각 고객의 ID, 이름, 총 구매 횟수, 총 구매 금액을 표시하세요. 고객의 이름을 통해서 검색 가능해야 합니다.

API Endpoint : `/customers`

Method: `GET`

QueryString : `name` `sortBy`


#### 구현 1. 고객 리스트

<img width="870" alt="스크린샷 2024-11-09 오후 9 55 22" src="https://github.com/user-attachments/assets/1393394c-4583-4131-ae75-bbccee02f465">

고객 ID 기준 내림차순 (desc) 정렬

#### 구현 2. Sort 버튼

- 불러온 데이터를 고객 ID 기준으로 재정렬 함수 작성

```typescript
import { CustomerList, Sort } from "../../types";

function customerListSorting(data: CustomerList[], sort: Sort): CustomerList[] {
  if (data.length > 0) return data.sort((a, b) => {
    if (sort === 'asc') {
      return a.id - b.id;
    } else if (sort === 'desc') {
      return b.id - a.id;
    }
    return 0;
  });
  return data;
}

export default customerListSorting;
```

- 재정렬 함수 테스트 케이스 작성

```typescript
import customerSorting from "./customerSorting";
import { CustomerList } from "../../types";

describe('고객 리스트 정렬', () => {
  let mockCustomerSortingFn: jest.Mock;

  const mockCustomerList: CustomerList[] = [
    { id: 10, name: "이서진", count: 1, totalAmount: 1000  },
    { id: 1, name: "김하늘", count: 1, totalAmount: 1000 },
    { id: 9, name: "조은비", count: 1, totalAmount: 1000 },
    { id: 13, name: "서지영", count: 1, totalAmount: 1000 },
    { id: 2, name: "서지영", count: 1, totalAmount: 1000 },
    { id: 19, name: "서지영", count: 1, totalAmount: 1000 },
  ];

  beforeEach(() => {
    mockCustomerSortingFn = jest.fn(customerSorting);
  });

  test('고객 리스트 ID 기준으로 오름차순 정렬', () => {
    const sortedCustomers = mockCustomerSortingFn(mockCustomerList, 'asc');

    // 오름차순 정렬 결과 확인
    expect(sortedCustomers[0].id).toBe(1);
    expect(sortedCustomers[1].id).toBe(2);
    expect(sortedCustomers[2].id).toBe(9);
    expect(sortedCustomers[3].id).toBe(10);
    expect(sortedCustomers[4].id).toBe(13);
    expect(sortedCustomers[5].id).toBe(19);

    // 리스트 비교
    expect(sortedCustomers).toEqual([
      { id: 1, name: '김하늘', count: 1, totalAmount: 1000 },
      { id: 2, name: '서지영', count: 1, totalAmount: 1000 },
      { id: 9, name: '조은비', count: 1, totalAmount: 1000 },
      { id: 10, name: '이서진', count: 1, totalAmount: 1000 },
      { id: 13, name: '서지영', count: 1, totalAmount: 1000 },
      { id: 19, name: '서지영', count: 1, totalAmount: 1000 },
    ]);
  });

  test('고객 리스트 ID 기준으로 내림차순 정렬', () => {
    const sortedCustomers = mockCustomerSortingFn(mockCustomerList, 'desc');

    expect(sortedCustomers[0].id).toBe(19);
    expect(sortedCustomers[1].id).toBe(13);
    expect(sortedCustomers[2].id).toBe(10);
    expect(sortedCustomers[3].id).toBe(9);
    expect(sortedCustomers[4].id).toBe(2);
    expect(sortedCustomers[5].id).toBe(1);

    // 리스트 비교
    expect(sortedCustomers).toEqual([
      { id: 19, name: '서지영', count: 1, totalAmount: 1000 },
      { id: 13, name: '서지영', count: 1, totalAmount: 1000 },
      { id: 10, name: '이서진', count: 1, totalAmount: 1000 },
      { id: 9, name: '조은비', count: 1, totalAmount: 1000 },
      { id: 2, name: '서지영', count: 1, totalAmount: 1000 },
      { id: 1, name: '김하늘', count: 1, totalAmount: 1000 },
    ]);
  });
});
```

#### 구현 3. 이름 검색 구현

<img width="859" alt="스크린샷 2024-11-09 오후 10 05 14" src="https://github.com/user-attachments/assets/9c7f1dc6-230b-49d7-925a-f6586f7c83ea">

<img width="863" alt="스크린샷 2024-11-09 오후 10 05 24" src="https://github.com/user-attachments/assets/f370b39a-9363-44de-98ab-a039ee0ef53c">

이름으로 검색 시 디바운스 훅을 활용한 과도한 Api 호출 방지

```typescript
import { useEffect, useState } from "react";

const useDebounce = (value: string, delay: number) => {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(timer);
    };
  }, [value]);

  return debouncedValue;
};

export default useDebounce;

// 디바운스 활용
export const CustomerView = (): ReactElement => {
  const [keyword, setKeyword] = useState('');
  const value = useDebounce(keyword, 300);
}
```

- 고객 ID 기반 상세 기능 
  - 특정 고객 Row를 클릭하면 해당 고객의 상세 구매 내역을 표시할 수 있는 기능을 구현하세요. 
  - 검색 결과에는 해당 고객의 구매 날짜, 구매한 제품 목록, 각 제품의 가격, 상품 썸네일이 포함되어야 합니다.

API Endpoint : `/customers/:id/purchases`

```text
⚠️ API Enpoint의 경우 README에 작성되어있는 경로와 일치하지 않습니다.
README에는 customer로 명세되어있습니다. (s 누락)
```

Method: `GET`

Params : UserID

#### 구현 1. 상세 조회

- 제품 목록 조회
- 구매 날짜
- 가격
- 썸네일

<img width="866" alt="스크린샷 2024-11-09 오후 10 13 47" src="https://github.com/user-attachments/assets/426db201-1ec1-49a5-824b-5c2b17705feb">

#### 존재하지 않는 id 접근 시 에러 페이지 이동

<img width="783" alt="스크린샷 2024-11-09 오후 10 14 51" src="https://github.com/user-attachments/assets/6ad861b8-fcf3-47f7-b006-1ee2dad604fd">


